{% macro ad(size) %}
<!-- <div class="sidebar-block bg-gray">
    <h3>Advertisement</h3>
    <p>
        No ads, yay!!
    </p>
</div> -->
{% endmacro %}

{% macro custom_style(header_color, background_color) %}
<style>
header {
    background-color: {{ header_color }};
}
nav, #nav:link, #logo {
    color: {{ header_text_color }} !important;
}

body {
    background-color: {{ background_color }};
    color: {{ text_color }};
}
.card {
    background-color: {{ card_color }};
}
aside {
    background-color: {{ aside_color }};
}
</style>
{% endmacro %}


{% macro search(suggestions) %}
<form action="{{ url_for('users.search') }}" method="get" class="lined bg-white block">
    <input name="search_term" type="text" list="project_names" placeholder="Enter a project name">
    <datalist id="project_names">
        {% for suggestion in suggestions %}
        <option value="{{suggestion.name}}">{{suggestion.name}} - {{suggestion.description[:20]}}</option>
        {% endfor %}
    </datalist>
    <input type="submit" value="Search" class="button-secondary">
</form>
{% endmacro %}



{% macro bugcard(bug, show_controls, color_code = {"PENDING": "bg-yellow", "RESOLVED": "bg-green", "DELETED": 'bg-black', "PINNED": 'bg-red'}) %}
<div id="card-{{bug.id}}" style="position: relative;">
    <div class="card">
        <h2>#{{ bug.ref_id }}</h2>
        <div>
            <span class="tag-mini {{ color_code[bug.status] }}">{{ bug.status }}</span>
            
            <span class="tag-mini bg-gray">Loc: {{ bug.bug_location }}</span>
            <span class="tag-mini bg-gray">Type: {{ bug.bug_type }}</span>
            <span class="tag-mini">{{ bug.version }}</span>
        </div>
        <h4>Description</h4>
        <p class="linebreak">{{ bug.details }}</p>
        <div class="author">
            {% if bug.author != "" or bug.author_email != "" %}
            <b>Reported by:</b> {{ bug.author }} (Email: {{ bug.author_email }})
            {% endif %} <br>
            <b>Reported on:</b> {{ bug.report_date.strftime('%Y-%m-%d') }}
            <br>
            {% if status == "RESOLVED" %}
            <b>Resolved on:</b> {{ bug.resolve_date }}
            {% endif %}
        </div>
    
        {% if show_controls == True %}
        <div class="cardcontrolstoggle" onClick="showControls('card-{{bug.id}}-controls')">
            &circledcirc;
        </div>
        <div class="hidden cardcontrols" id='card-{{bug.id}}-controls'>
            {% if bug.status != "RESOLVED" %}
            <button onclick="fill_card_form('{{bug.id}}', 'resolve')">RESOLVE</button>
            {% endif %}
            {% if bug.status != "PINNED" %}
            <button onclick="fill_card_form('{{bug.id}}', 'pin')">PIN &#x02606;</button>
            {% endif %}
            {% if bug.status != "DELETED" %}
            <button onclick="fill_card_form('{{bug.id}}', 'delete')">DELETE &#128465;</button>
            {% else %}
            <button onclick="fill_card_form('{{bug.id}}', 'undelete')">UNDELETE &#128465;</button>
            {% endif %}
            <button onClick="showControls('card-{{bug.id}}-controls')" style="color: #ff3939">CANCEL &rarrhk;</button>
        </div>
        {% endif %}
    </div>
    <div style="position: fixed; top: 0; left: 0;" class="hidden" id="card-{{bug.id}}-process"></div>
</div>
{% endmacro %}


{% macro project_nav(project) %}
<a href="{{ url_for('users.dashboard') }}">My BugDiaries</a>
<a href="{{ url_for('projects.dashboard', project_url = project.url) }}">{{project.name}}</a>
<a href="{{ url_for('projects.settings', project_url = project.url) }}">Settings</a>
<a href="{{ url_for('users.logout') }}">Logout</a>
{% endmacro %}




{% macro summary_with_stats(project) %}
<div class="project-summary">
    <div class="name shadowed">
        <a href="{{ url_for('projects.dashboard', project_url = project['url']) }}">open</a><span onclick="toggleElement('sum-{{project.id}}')">{{ project['name'] }}</span>
        <p class="hidden" id="sum-{{ project.id}}">
            {% if project['description'] != "" %}
            {{ project['description'] }}
            {% else %}
            No Description Provided
            {% endif %}
        </p>
    </div>
    <div class="stats text-centered shadowed bg-yellow">
        {{ project['since_last_login'] }}
    </div>
    <div class="stats text-centered shadowed bg-green">
        {{ project['resolved'] }}
    </div>
    <div class="stats text-centered shadowed bg-red">
        {{ project['unresolved'] }}
    </div>
</div>
{% endmacro %}