{% extends 'confined.html' %}
{% import 'macros.html' as macros %}

{% block addons %}
{{ macros.custom_style(project.settings.header_color, project.settings.background_color) }}
{% endblock %}

{% block title %}
  {{project.name}} - Report a Bug
{% endblock %}

{% block custom_nav %}
{% if current_user.is_authenticated and current_user in project.collaborators %}
    <a href="{{ url_for('users.dashboard') }}">All projects</a>
    <a href="{{ url_for('projects.dashboard', project_url = project.url) }}">{{project.name}}</a>
    <a href="{{ url_for('projects.settings', project_url = project.url) }}">Settings</a>
    <a href="{{ url_for('users.logout') }}">Logout</a>
{% else %}
    <a href="{{ url_for('projects.blog', project_url = project.url) }}">BLOG</a>
    {% if project.settings.ext_url != "" %}
    <a href="{{ project.settings.ext_url }}">BACK TO {{ project.name }}</a>
    {% endif %}
{% endif %}
{% endblock %}

{% block custom_logo %}{{ project.name }}{% endblock %}

{% block main %}
<h1>Report an Issue</h1>
<div class="main-aside">
  <main>
    <div class="bg-white rounded shadowed block">
      <form method="post">
        {{ form.hidden_tag() }}
          
        {% if form_type == "suggest" %}
          {{ form.bug_type.label }}{{ form.bug_type(list = 'types_list')}}
          {% for bug_type in bug_types %}
          <datalist id="types_list">
            <option value="{{ bug_type }}">{{ bug_type }}</option>
          </datalist>
          {% endfor %}

          {{ form.bug_location.label }} {{ form.bug_location(list = 'locations_list') }}
          <datalist id="locations_list">
            {% for bug_location in bug_locations %}
            <option value="{{ bug_location }}">{{ bug_location }}</option>
            {% endfor %}
          </datalist>

        {% elif form_type == "select" %}
          {{ form.bug_type.label }} {{ form.bug_type }}
          {{ form.bug_location.label }} {{ form.bug_location }}
        {% endif %}
        
        {{ form.details.label }}{{ form.details }}
        <p>
          <a onClick="toggleElement('form-contact')">(Optional) Click to Provide Contact Details</a>
        </p>
        <div id="form-contact" class="hidden block bg-gray rounded">
          {{ form.author.label }}{{ form.author }}
          {{ form.author_email.label }}{{ form.author_email }}
        </div>
        {{ form.submit() }}
      </form>
    </div>
  </main>
  <aside>
    <div class="sidebar-block bg-gray">
      <h3>Create Your Own</h3>
      <p>BugDiary.com is a simple-to-use issue-tracking and bug-reporting platform, create your own today!</p>
    </div>
    {{ macros.ad(medium) }}
  </aside>
</div>
{% endblock %}